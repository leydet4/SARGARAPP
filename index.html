<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Port of Virginia Todd Dooley Search and Rescue Forum 2026</title>

<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#0f172a" />

<link rel="icon" href="povsargarapp-qr.png">
<link rel="apple-touch-icon" href="povsargarapp-qr.png">

<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: system-ui, sans-serif; }
.card { background:#1e293b; border-radius:12px; padding:20px; }
.label { color:#94a3b8; font-size:14px; }
.value { font-size:20px; font-weight:600; }
</style>
</head>

<body class="bg-slate-900 text-white">

<header class="bg-slate-800 p-4 shadow-md flex justify-between items-center">
<h1 class="text-xl font-bold">Port of Virginia Todd Dooley SAR Forum 2026</h1>
<nav class="space-x-4">
<a href="index.html" class="text-orange-400">Dashboard</a>
<a href="gar.html">GAR Submissions</a>
</nav>
</header>

<section class="p-6">
<h2 class="text-2xl mb-4 font-semibold">HRBT Marine Conditions</h2>

<div class="grid md:grid-cols-3 gap-6">

<div class="card">
<div class="label">Next Tide</div>
<div id="tideStatus" class="value">Loading...</div>
</div>

<div class="card">
<div class="label">Wave Height</div>
<div id="waveHeight" class="value">Loading...</div>
</div>

<div class="card">
<div class="label">Wind</div>
<div id="wind" class="value">Loading...</div>
</div>

<div class="card">
<div class="label">Water Temp</div>
<div id="waterTemp" class="value">Loading...</div>
</div>

<div class="card">
<div class="label">Air Temp</div>
<div id="airTemp" class="value">Loading...</div>
</div>

<div class="card">
<div class="label">Visibility</div>
<div id="visibility" class="value">Loading...</div>
</div>

</div>

<div class="mt-10 text-center">
<img src="povsargarapp-qr.png" alt="Install QR Code" class="mx-auto w-48">
<p class="mt-3 text-sm text-slate-400">
Scan to open on mobile and install
</p>
</div>

</section>

<footer class="text-center p-4 text-slate-500 text-sm">
NOAA Data | Auto-refresh every 5 minutes
</footer>

<script>
async function fetchData() {
try {

// Sewells Point Tide Station
const tideRes = await fetch("https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?product=predictions&application=web&begin_date=today&range=24&datum=MLLW&station=8638610&time_zone=lst_ldt&units=english&interval=hilo&format=json");
const tideData = await tideRes.json();

if(tideData.predictions){
const now = new Date();
let next = tideData.predictions.find(p => new Date(p.t) > now);
document.getElementById("tideStatus").innerText =
`${next.type} at ${next.t}`;
}

// Buoy 44099
const waveRes = await fetch("https://www.ndbc.noaa.gov/data/realtime2/44099.json");
const waveData = await waveRes.json();

if(waveData.data){
let latest = waveData.data[0];
document.getElementById("waveHeight").innerText =
`${latest.wave_height} ft`;
document.getElementById("wind").innerText =
`${latest.wind_speed} kts ${latest.wind_direction}°`;
document.getElementById("airTemp").innerText =
`${latest.air_temperature} °F`;
document.getElementById("waterTemp").innerText =
`${latest.water_temperature} °F`;
document.getElementById("visibility").innerText =
`${latest.visibility} nm`;
}

} catch(e){
console.log(e);
}
}

fetchData();
setInterval(fetchData, 300000);
</script>

<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
