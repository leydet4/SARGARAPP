<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - POV SAR 2026</title>

<link rel="icon" href="SAR.png">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: system-ui, sans-serif; }

.card {
  background:#1e293b;
  border-radius:16px;
  padding:20px;
  box-shadow:0 0 25px rgba(0,0,0,.35);
}

iframe {
  width:100%;
  height:380px;
  border-radius:12px;
}

input {
  background:#334155;
  border-radius:10px;
  padding:10px;
  width:100%;
}

button {
  border-radius:12px;
}
</style>
</head>

<body class="bg-slate-900 text-white">

<!-- LOGIN -->
<div id="loginScreen" class="min-h-screen flex items-center justify-center">

<div class="card w-full max-w-md text-center space-y-4">

<img src="SAR.png" class="mx-auto h-16">

<h1 class="text-xl font-bold">Admin Login</h1>

<input type="password" id="passwordInput"
placeholder="Enter Admin Password"
class="text-center text-lg">

<button onclick="checkPassword()"
class="w-full bg-red-700 hover:bg-red-800 p-3 font-bold">
LOGIN
</button>

<a href="index.html"
class="block text-sm text-slate-400 underline mt-2">
Back to Dashboard
</a>

</div>
</div>

<!-- ADMIN CONTENT -->
<div id="adminContent" class="hidden p-6 space-y-6">

<div class="flex justify-between items-center">
<h1 class="text-2xl font-black">Admin Dashboard</h1>

<button onclick="logout()"
class="bg-red-700 hover:bg-red-800 px-4 py-2 font-bold">
LOGOUT
</button>
</div>

<!-- RESOURCE UPLOAD -->
<div class="card space-y-4">

<h2 class="text-xl font-bold">Upload Resource</h2>

<form id="uploadForm" enctype="multipart/form-data" class="space-y-3">

<input type="text" name="title" placeholder="Resource Title" required>

<input type="file" name="file" required>

<button type="submit"
class="w-full bg-green-600 hover:bg-green-700 p-3 font-bold">
UPLOAD RESOURCE
</button>

</form>

<div id="uploadStatus" class="text-sm text-slate-400"></div>

</div>

<!-- GAR SHEETS -->
<div class="grid md:grid-cols-2 gap-6">

<div class="card">
<h2 class="font-bold mb-2">Task Force 1</h2>
<iframe src="https://docs.google.com/spreadsheets/d/1xfMcENDbVbWkwuexGOFjfz9MGp8aD5eFxslVIaeDDdg/pubhtml?gid=462942313&single=true&widget=true&headers=false"></iframe>
</div>

<div class="card">
<h2 class="font-bold mb-2">Task Force 2</h2>
<iframe src="https://docs.google.com/spreadsheets/d/1xfMcENDbVbWkwuexGOFjfz9MGp8aD5eFxslVIaeDDdg/pubhtml?gid=653219596&single=true&widget=true&headers=false"></iframe>
</div>

<div class="card">
<h2 class="font-bold mb-2">Task Force 3</h2>
<iframe src="https://docs.google.com/spreadsheets/d/1xfMcENDbVbWkwuexGOFjfz9MGp8aD5eFxslVIaeDDdg/pubhtml?gid=1655685068&single=true&widget=true&headers=false"></iframe>
</div>

<div class="card">
<h2 class="font-bold mb-2">Task Force 4</h2>
<iframe src="https://docs.google.com/spreadsheets/d/1xfMcENDbVbWkwuexGOFjfz9MGp8aD5eFxslVIaeDDdg/pubhtml?gid=70233464&single=true&widget=true&headers=false"></iframe>
</div>

<div class="card md:col-span-2">
<h2 class="font-bold mb-2">Other Submissions</h2>
<iframe src="https://docs.google.com/spreadsheets/d/1xfMcENDbVbWkwuexGOFjfz9MGp8aD5eFxslVIaeDDdg/pubhtml?gid=477824279&single=true&widget=true&headers=false"></iframe>
</div>

</div>

</div>

<script>

const ADMIN_PASSWORD = "POVSAR2026";

function checkPassword() {
  const entered = document.getElementById("passwordInput").value;
  if (entered === ADMIN_PASSWORD) {
    sessionStorage.setItem("adminAuth", "true");
    showAdmin();
  } else {
    alert("Incorrect Password");
  }
}

function showAdmin() {
  document.getElementById("loginScreen").classList.add("hidden");
  document.getElementById("adminContent").classList.remove("hidden");
}

function logout() {
  sessionStorage.removeItem("adminAuth");
  location.reload();
}

if (sessionStorage.getItem("adminAuth") === "true") {
  showAdmin();
}

document.getElementById("uploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const formData = new FormData(e.target);

  const res = await fetch("/.netlify/functions/uploadResource", {
    method: "POST",
    body: formData
  });

  const result = await res.json();

  if (result.success) {
    document.getElementById("uploadStatus").innerText = "Upload successful.";
    e.target.reset();
  } else {
    document.getElementById("uploadStatus").innerText = "Upload failed.";
  }
});

</script>

</body>
</html>