<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - POV SAR 2026</title>

<link rel="icon" href="SAR.png">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: system-ui, sans-serif; }

.card {
  background:#1e293b;
  border-radius:16px;
  padding:24px;
  box-shadow:0 0 25px rgba(0,0,0,.35);
}

.btn {
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
  transition:.2s;
}

.btn-primary { background:#2563eb; }
.btn-primary:hover { background:#1d4ed8; }

.btn-danger { background:#dc2626; }
.btn-danger:hover { background:#b91c1c; }

.resource-row {
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#334155;
  padding:12px;
  border-radius:10px;
}
</style>
</head>

<body class="bg-slate-900 text-white">

<header class="bg-slate-800 py-6 text-center shadow-lg">
  <img src="SAR.png" class="mx-auto h-16 mb-3">
  <h1 class="text-2xl font-black">Admin Dashboard</h1>
  <a href="index.html"
     class="inline-block mt-4 px-5 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-bold text-sm">
     ‚Üê Back to Dashboard
  </a>
</header>

<section class="p-6 max-w-3xl mx-auto space-y-8">

<div class="card">
<h2 class="text-xl font-bold mb-4">Manage Resources</h2>
<div id="adminResourceList" class="space-y-3">
Loading...
</div>
</div>

</section>

<script>

async function loadAdminResources() {

  const res = await fetch("/.netlify/functions/getResources");
  const files = await res.json();

  const container = document.getElementById("adminResourceList");
  container.innerHTML = "";

  if (!files.length) {
    container.innerText = "No resources uploaded.";
    return;
  }

  files.forEach(file => {

    const row = document.createElement("div");
    row.className = "resource-row";

    const name = document.createElement("span");
    name.innerText = file.name;

    const delBtn = document.createElement("button");
    delBtn.className = "btn btn-danger text-sm";
    delBtn.innerText = "Delete";

    delBtn.onclick = async () => {

      const confirmDelete = confirm(`Delete "${file.name}"?`);
      if (!confirmDelete) return;

      await fetch(`/.netlify/functions/uploadResource?name=${encodeURIComponent(file.file)}`, {
        method: "DELETE"
      });

      loadAdminResources();
    };

    row.appendChild(name);
    row.appendChild(delBtn);
    container.appendChild(row);
  });
}

loadAdminResources();

</script>

</body>
</html>
